{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"fs-extra\"","webpack:///./src/var.ts","webpack:///./src/data/index.ts","webpack:///external \"lodash\"","webpack:///./src/util.ts","webpack:///external \"chalk\"","webpack:///external \"path\"","webpack:///external \"async\"","webpack:///external \"child-process-promise\"","webpack:///./src/index.ts","webpack:///./src/build.ts","webpack:///./src/parser/char.ts","webpack:///./src/data/char.i.ts","webpack:///external \"prettier\"","webpack:///external \"util\"","webpack:///external \"image-size\"","webpack:///./src/parser/item.ts","webpack:///./src/parser/stage.ts","webpack:///./src/common.util.ts","webpack:///./src/parser/enemy.ts","webpack:///./src/parser/skill.ts","webpack:///./src/parser/charword.ts","webpack:///./src/parser/item.img.ts","webpack:///external \"yaml\"","webpack:///./src/clean.ts","webpack:///./src/sync.ts","webpack:///./src/wiki/bot.ts","webpack:///external \"axios\"","webpack:///external \"querystring\"","webpack:///external \"form-data\"","webpack:///external \"dotenv\"","webpack:///external \"yargs\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","TMP_PREFIX","TARGET_PREFIX","fs","var_1","loadData","async","character_table","JSON","parse","readFile","handbook_info_table","handbook_team_table","item_table","skill_table","skin_table","stage_table","enemy_handbook_table","charword_table","enemy_database","enemy_table","enemies","reduce","v","Key","Value","char_extra_table","prettier","_","toLuaObject","obj","padding","pad","repeat","padn1","Array","isArray","some","length","raw","map","join","arr","filter","isComplex","content","k","match","stringify","convertObjectToLua","dataname","endsWith","substr","formatJSON","src","format","parser","isEmpty","every","keys","firstCase","toUpperCase","purge","a","forEach","json2Tab","json","title","schema","data","line","cell","type","en","license","description","sources","fields","async_1","forEachLimit","itor","limit","func","Promise","resolve","default","err","util_1","imgSizeOf","promisify","build_1","clean_1","sync_1","usage","scriptName","command","describe","argv","force","alias","skip","help","chalk_1","child_process_promise_1","path","data_1","char_1","item_1","stage_1","enemy_1","skill_1","charword_1","item_img_1","charList","vCharList","skillMap","sCharSkillLink","convertStage","cmd","stages","translateStage","stage_preview","translateStagePreview","ensureDir","dist","pathExists","console","log","green","basename","exec","luaOutput","outputFile","text","id","translateCharacter","assign","handbookDict","displayNumber","skills","push","writeFile","convertCharacter","itemList","items","translateItem","convertItem","enemyList","translateEnemy","convertEnemy","stories","char","charID","startsWith","red","storyTextAudio","story","storyTitle","replace","toWikiText","storyText","unLockType","unLockParam","unLockString","Boolean","chars","convertCharHandbook","translateSkill","usedBy","sync","convertSkill","convertCharSkill","charword","translateCharword","tab","convertCharWord","basedir","outdir","files","readdir","mainFiles","includes","size","width","height","head","indexOf","outName","toSkinFile","re","RegExp","main","all","test","find","group","slice","origin","alpha","out","convertCharImage","convertItemImages","skillNames","translateSkillIcon","copy","e","convertSkillIcon","cw","charId","split","voiceAsset","toLowerCase","voiceId","dst","rst","stderr","blue","convertCVAudio","char_i_1","uniqArray","tmp","uniq","collectedPic","Set","charName","skinTail","skinHead","skinHash","skinid","charSkins","skinSeq","idMap","1+","2","fileName","handbook","rarity","canUseGeneralPotentialItem","potentialItemId","appellation","position","tagList","displayLogo","itemUsage","itemDesc","itemObtainApproach","maxPotentialLevel","tokenKey","team","teamKey","teamName","color","profession","Profession","potentialRanks","phases","maxLevel","rangeId","evolveCost","prop4list","prop3list","phase","index","prop","attributesKeyFrames","concat","count","checkDefault","def","skillId","skill","levels","unlockCond","level","cost","levelUpCostCond","levelUpCost","masterCost","allSkillLvlup","skillCost","rankup","lvlUpCost","talents","talent","candidates","unlockCondition","desc","upgrades","requiredPotentialRank","potential","cv","infoName","art","drawName","skins","skin","displaySkin","skinGroupName","file","portraitId","add","drawerName","drawer","appearance","voiceText","extra","item","iconid","iconId","stackiconid","stackIconId","obtainapproach","obtainApproach","itemtype","itemType","dropBy","stageDropList","stageId","code","DropRateTable","rate","occPer","craftBy","buildingProductList","RoomType","roomType","common_util_1","fs_extra_1","translateDrop","drop","translateCharDrop","stage","preview","hard","hardStagedId","trim","alterName","hardDesc","dangerLevel","canPractice","canBattleReplay","apCost","apFailReturn","practiceTicketCost","expGain","goldGain","hilightMark","bossMark","isPredefined","stageDropInfo","displayDetailRewards","hardGrop","processDrop","firstDrop","dropType","firstCharDrop","firstHardDrop","commonDrop","specialDrop","extraDrop","levelId","pathExistsSync","readFileSync","enemyDbRefs","enemy","translateStageEnemy","enemyHandbook","enemyId","enemyIndex","enemyLevel","enemyRace","attackType","ability","endure","attack","defence","resistance","level0","level1","attributes","enemyData","m_value","rangeRadius","rangeRadius0","rangeRadius1","base","skillType","spType","spData","lv","duration","spCost","initSp","increment","props","blackboard","val","toFixed","String","initr","yaml","outs","img","meta","sprite","TextureImporter","spriteSheet","sprites","res","Math","round","rect","x","y","remove","bot_1","config","uploadImage","dir","bot","skipv","skipedFiles","job","done","getImageInfo","uploadFile","upload","result","jobfiles","syncPage","greenBright","edit","error","syncPageFromFile","rawTitle","localFile","localRaw","modulesList","pullModules","pull","downloadPage","mo","purgeWithTemplate","tplName","generator","titles","gtilimit","syncMultiPages","pages","page","WikiBot","process","env","user","session","getToken","pushModules","uploadModuleData","syncSinglePage","axios_1","querystring","FormData","[object Object]","wiki","this","BASE","client","headers","common","Cookie","post","Content-Type","API","RAW","url","query","token","tokens","csrftoken","ask","offset","encodeURI","results","nextPage","info","formdata","action","message","reason","delete","options","filename","fileurl","comment","timeout","buffer","createReadStream","form","append","getHeaders","api","apiPagination","imageinfo"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = require(\"fs-extra\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TMP_PREFIX = \"tmp/\";\r\nexports.TARGET_PREFIX = \"dist/\";\r\n// export const PATCH_PREFIX = \"src/patch/\";\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fs = require(\"fs-extra\");\r\nconst var_1 = require(\"../var\");\r\nexports.loadData = async () => {\r\n    // load data\r\n    exports.character_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/character_table.json\", \"utf-8\"));\r\n    exports.handbook_info_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/handbook_info_table.json\", \"utf-8\"));\r\n    exports.handbook_team_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/handbook_team_table.json\", \"utf-8\"));\r\n    exports.item_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/item_table.json\", \"utf-8\"));\r\n    exports.skill_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/skill_table.json\", \"utf-8\"));\r\n    exports.skin_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/skin_table.json\", \"utf-8\"));\r\n    exports.stage_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/stage_table.json\", \"utf-8\"));\r\n    exports.enemy_handbook_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/enemy_handbook_table.json\", \"utf-8\"));\r\n    exports.charword_table = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/excel/charword_table.json\", \"utf-8\"));\r\n    const enemy_database = JSON.parse(await fs.readFile(var_1.TMP_PREFIX + \"ArknightsGameData/levels/enemydata/enemy_database.json\", \"utf-8\"));\r\n    exports.enemy_table = enemy_database.enemies.reduce((r, v) => ((r[v.Key] = v.Value), r), {});\r\n    exports.char_extra_table = JSON.parse(await fs.readFile(\"src/patch/char.json\", \"utf-8\"));\r\n};\r\n","module.exports = require(\"lodash\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst prettier = require(\"prettier\");\r\nconst _ = require(\"lodash\");\r\nexports.toLuaObject = (obj, padding = 0) => {\r\n    const pad = \"    \".repeat(padding), padn1 = padding > 0 ? \"    \".repeat(padding - 1) : \"\";\r\n    if (typeof obj === \"object\" && obj !== null) {\r\n        if (Array.isArray(obj)) {\r\n            const isComplex = obj.some(v => typeof v === \"object\") ? obj.length > 3 : obj.length > 10;\r\n            if (isComplex) {\r\n                const raw = obj.map(v => exports.toLuaObject(v, padding + 1)).join(`, \\n${pad}`);\r\n                return \"{\\n\" + pad + raw + \"\\n\" + padn1 + \"}\";\r\n            }\r\n            else {\r\n                const raw = obj.map(v => exports.toLuaObject(v, padding)).join(\", \");\r\n                return \"{\" + raw + \"}\";\r\n            }\r\n        }\r\n        else {\r\n            const arr = _.filter(obj, v => v !== null);\r\n            const isComplex = arr.length > 2 || arr.some(v => typeof v === \"object\");\r\n            const content = _.map(obj, (v, k) => {\r\n                if (v === null)\r\n                    return null;\r\n                if (isComplex) {\r\n                    if (k.match(/^\\w[\\d\\w]*$/))\r\n                        return pad + `${k} = ${exports.toLuaObject(v, padding + 1)},\\n`;\r\n                    else\r\n                        return pad + `[\"${k}\"] = ${exports.toLuaObject(v)},\\n`;\r\n                }\r\n                else {\r\n                    if (k.match(/^\\w[\\d\\w]*$/))\r\n                        return `${k} = ${exports.toLuaObject(v, padding + 1)}, `;\r\n                    else\r\n                        return `[\"${k}\"] = ${exports.toLuaObject(v)}, `;\r\n                }\r\n            }).filter(v => v !== null);\r\n            if (isComplex)\r\n                return `{\\n${content.join(\"\")}${padn1}}`;\r\n            else\r\n                return `{ ${content.join(\"\")}}`;\r\n        }\r\n    }\r\n    return JSON.stringify(obj);\r\n};\r\nexports.convertObjectToLua = (arr, name, dataname = (name.endsWith(\"ies\") ? name.substr(0, name.length - 3) + \"y\" : name.endsWith(\"s\") ? name.substr(0, name.length - 1) : name) + \"Data\") => {\r\n    const charList = arr.map(c => `[\"${c.name}\"] = ${exports.toLuaObject(c, 3)}`);\r\n    const tmpl = `-- AUTOMATIC GENERATED, DO NOT EDIT\n-- see https://github.com/pa001024/arks\n\nlocal ${dataname} = {\n    [\"${name}\"] = {\n        ${charList.join(\",\\n        \")}\n    },\n}\nreturn ${dataname}`;\r\n    return tmpl;\r\n};\r\nexports.formatJSON = (src) => {\r\n    return prettier.format(typeof src === \"string\" ? src : JSON.stringify(src), { parser: \"json\" });\r\n};\r\nexports.isEmpty = (obj) => {\r\n    if (Array.isArray(obj))\r\n        return obj.every(v => exports.isEmpty(v));\r\n    return !obj || (typeof obj === \"object\" && !Object.keys(obj).length);\r\n};\r\nexports.firstCase = (src) => {\r\n    return src[0].toUpperCase() + src.substr(1);\r\n};\r\nexports.purge = (a) => {\r\n    Object.keys(a).forEach(v => a[v] !== 0 && !a[v] && delete a[v]);\r\n    return a;\r\n};\r\n/** JSON转换为WikiTab格式 */\r\nexports.json2Tab = (json, title = \"自动管理模板v1.0\") => {\r\n    const schema = {};\r\n    const data = json.map(line => {\r\n        return _.map(line, (cell, key) => {\r\n            if (!schema[key]) {\r\n                schema[key] = {\r\n                    name: key,\r\n                    type: typeof cell,\r\n                    title: {\r\n                        en: key,\r\n                    },\r\n                };\r\n            }\r\n            return cell;\r\n        });\r\n    });\r\n    const tpl = {\r\n        license: \"CC0-1.0\",\r\n        description: {\r\n            en: title,\r\n        },\r\n        sources: \"AUTOMATIC GENERATED BY https://github.com/pa001024/arks\",\r\n        schema: {\r\n            fields: _.map(schema),\r\n        },\r\n        data,\r\n    };\r\n    return tpl;\r\n};\r\nconst async_1 = require(\"async\");\r\nexports.forEachLimit = (itor, limit = 5, func) => {\r\n    return new Promise(resolve => {\r\n        async_1.default.forEachLimit(itor, limit, func, err => {\r\n            resolve();\r\n        });\r\n    });\r\n};\r\nconst util_1 = require(\"util\");\r\nexports.imgSizeOf = util_1.promisify(require(\"image-size\"));\r\n","module.exports = require(\"chalk\");","module.exports = require(\"path\");","module.exports = require(\"async\");","module.exports = require(\"child-process-promise\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst build_1 = require(\"./build\");\r\nconst clean_1 = require(\"./clean\");\r\nconst sync_1 = require(\"./sync\");\r\nconst yargs_1 = require(\"yargs\");\r\nyargs_1.usage(\"$0 <cmd> [args]\")\r\n    .scriptName(\"arks-parser\")\r\n    .command(\"build [mode]\", \"build from source\", {\r\n    mode: {\r\n        type: \"string\",\r\n        default: \"\",\r\n        describe: \"the mode name\",\r\n    },\r\n}, async function (argv) {\r\n    await build_1.default(argv.mode);\r\n})\r\n    .command(\"sync [mode]\", \"sync online\", {\r\n    mode: {\r\n        type: \"string\",\r\n        default: \"module\",\r\n        describe: \"the mode name\",\r\n    },\r\n    force: {\r\n        alias: \"f\",\r\n        type: \"boolean\",\r\n        default: \"\",\r\n        describe: \"force update\",\r\n    },\r\n    skip: {\r\n        type: \"string\",\r\n        default: \"\",\r\n        describe: \"skip to some file name\",\r\n    },\r\n}, async function (argv) {\r\n    await sync_1.default(argv);\r\n})\r\n    .command(\"clean [module]\", \"clean online\", {}, async function (argv) {\r\n    await clean_1.default();\r\n})\r\n    .help().argv;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fs = require(\"fs-extra\");\r\nconst var_1 = require(\"./var\");\r\nconst chalk_1 = require(\"chalk\");\r\nconst _ = require(\"lodash\");\r\nconst async_1 = require(\"async\");\r\nconst child_process_promise_1 = require(\"child-process-promise\");\r\nconst path = require(\"path\");\r\nconst data_1 = require(\"./data\");\r\nconst char_1 = require(\"./parser/char\");\r\nconst item_1 = require(\"./parser/item\");\r\nconst util_1 = require(\"./util\");\r\nconst stage_1 = require(\"./parser/stage\");\r\nconst enemy_1 = require(\"./parser/enemy\");\r\nconst skill_1 = require(\"./parser/skill\");\r\nconst charword_1 = require(\"./parser/charword\");\r\nconst item_img_1 = require(\"./parser/item.img\");\r\nlet charList; // 召唤物和干员\r\nlet vCharList; // 干员\r\nlet sCharSkillLink = {}; // 干员\r\nlet skillMap;\r\nconst convertCharImage = async () => {\r\n    const basedir = var_1.TMP_PREFIX + \"DB/Texture2D/\";\r\n    const outdir = var_1.TARGET_PREFIX + \"char/\";\r\n    await fs.ensureDir(outdir);\r\n    const files = await fs.readdir(basedir);\r\n    // const hasPathid = /#\\d\\d+/;\r\n    let mainFiles = [];\r\n    for (let i = 0; i < files.length; i++) {\r\n        const name = files[i];\r\n        if (name.includes(\"[alpha]\")) {\r\n            const size = await util_1.imgSizeOf(basedir + name);\r\n            if (size.width >= 1024 && size.height >= 1024) {\r\n                const head = name.substr(0, name.indexOf(\"[alpha]\"));\r\n                let outName = char_1.toSkinFile(head);\r\n                if (!outName)\r\n                    console.log(chalk_1.default.red(\"unknown skin\"), head);\r\n                const re = new RegExp(`^${head.replace(\"+\", \"\\\\+\")}(?: #\\\\d+)?\\\\.png$`);\r\n                const origin = await Promise.all(files.filter(v => re.test(v)).map(async (name) => ({ name, ...(await util_1.imgSizeOf(basedir + name)) })));\r\n                const main = origin.find(v => v.height >= 1024);\r\n                if (!main) {\r\n                    console.log(chalk_1.default.red(\"cant find file\", name));\r\n                }\r\n                else {\r\n                    if (outName)\r\n                        mainFiles.push([main.name, name, outName + \".png\"]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 并行进程数\r\n    const STEP = 2;\r\n    for (let i = 0; i < mainFiles.length; i += STEP) {\r\n        const group = mainFiles.slice(i, i + STEP);\r\n        await Promise.all(group.map(async ([origin, alpha, out]) => {\r\n            if (await fs.pathExists(outdir + out)) {\r\n                // console.log(chalk.blue(\"file exists\"), out);\r\n                return;\r\n            }\r\n            await child_process_promise_1.exec(`magick convert \"${basedir + origin}\" \"${basedir + alpha}\" -alpha off -resize 1024x1024 -compose copyopacity -composite ${basedir}${out}`);\r\n            console.log(chalk_1.default.green(\"converted\"), out);\r\n        }));\r\n    }\r\n};\r\nconst convertItem = async () => {\r\n    const itemList = _.map(data_1.item_table.items, item_1.translateItem);\r\n    const luaOutput = util_1.convertObjectToLua(itemList, \"Items\");\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"ItemData.lua\", luaOutput);\r\n};\r\nconst convertEnemy = async () => {\r\n    const enemyList = _.map(data_1.enemy_handbook_table, enemy_1.translateEnemy);\r\n    const luaOutput = util_1.convertObjectToLua(enemyList, \"Enemies\");\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"EnemyData.lua\", luaOutput);\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"Enemy.sync.json\", util_1.formatJSON(enemyList.map(v => {\r\n        return { title: v.name, text: \"{{InfoboxEnemy}}{{NavboxEnemy}}\" };\r\n    })));\r\n};\r\nconst convertCharacter = async () => {\r\n    charList = _.map(data_1.character_table, (v, id) => char_1.translateCharacter(Object.assign({ id }, v), data_1.handbook_info_table.handbookDict[id]));\r\n    vCharList = charList.filter(v => v.displayNumber);\r\n    charList.forEach(v => {\r\n        if (v.skills)\r\n            v.skills.forEach(s => {\r\n                if (!sCharSkillLink[s.name])\r\n                    sCharSkillLink[s.name] = [];\r\n                sCharSkillLink[s.name].push(v.name);\r\n            });\r\n    });\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"CharacterFlat.json\", util_1.formatJSON(charList));\r\n    const luaOutput = util_1.convertObjectToLua(charList, \"Characters\");\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"CharacterData.lua\", luaOutput);\r\n    await fs.writeFile(var_1.TMP_PREFIX + \"character_array.json\", util_1.formatJSON(charList));\r\n};\r\nconst convertStage = async (cmd = \"\") => {\r\n    const stages = stage_1.translateStage();\r\n    const stage_preview = _.map(stages, stage_1.translateStagePreview);\r\n    if (cmd === \"map\") {\r\n        await fs.ensureDir(var_1.TARGET_PREFIX + \"maps\");\r\n        for (let i = 0; i < stage_preview.length; i++) {\r\n            const [src, dist] = stage_preview[i];\r\n            if ((await fs.pathExists(src)) && !(await fs.pathExists(dist))) {\r\n                console.log(chalk_1.default.green(\"[map] convert\"), `${path.basename(src)} => ${path.basename(dist)}`);\r\n                await child_process_promise_1.exec(`magick convert \"${path.resolve(src)}\" -resize 512x288! \"${dist}\"`);\r\n            }\r\n        }\r\n    }\r\n    const luaOutput = util_1.convertObjectToLua(stages, \"Stages\");\r\n    await fs.outputFile(var_1.TARGET_PREFIX + \"StageData.lua\", luaOutput);\r\n    await fs.outputFile(var_1.TARGET_PREFIX + \"Stage.sync.json\", util_1.formatJSON(stages.map(v => {\r\n        return { title: v.name, text: `{{InfoboxStage}}{{NavboxStage}}` };\r\n    })));\r\n};\r\nconst convertCharHandbook = async () => {\r\n    const stories = _.map(data_1.handbook_info_table.handbookDict, char => {\r\n        if (!data_1.character_table[char.charID]) {\r\n            if (!char.charID.startsWith(\"npc\"))\r\n                console.log(chalk_1.default.red(\"[Convert Char Handbook] charid not found\"), char.charID);\r\n            return;\r\n        }\r\n        const name = data_1.character_table[char.charID].name;\r\n        const toWikiText = (s) => {\r\n            return s.replace(/\\n/g, \"<br>\").replace(/\\. /g, \".&nbsp;\");\r\n        };\r\n        return {\r\n            title: `${name}/人员档案`,\r\n            text: char.storyTextAudio\r\n                .map(story => {\r\n                const s = story.stories[0];\r\n                return `{{情报\n|storyTitle=${story.storyTitle}\n|storyText=${toWikiText(s.storyText)}\n|unLockType=${s.unLockType}\n|unLockParam=${s.unLockParam}\n|unLockString=${s.unLockString}\n}}`;\r\n            })\r\n                .join(\"\\n\"),\r\n        };\r\n    }).filter(Boolean);\r\n    const chars = _.map(data_1.handbook_info_table.handbookDict, char => {\r\n        if (!data_1.character_table[char.charID])\r\n            return;\r\n        const name = data_1.character_table[char.charID].name;\r\n        return {\r\n            title: `${name}`,\r\n            text: `{{干员页面}}`,\r\n        };\r\n    }).filter(Boolean);\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"Char.sync.json\", util_1.formatJSON(chars));\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"CharHandbook.sync.json\", util_1.formatJSON(stories));\r\n};\r\nconst convertSkill = async () => {\r\n    const skills = _.map(data_1.skill_table, skill_1.translateSkill);\r\n    skillMap = skills.reduce((r, v) => {\r\n        r[v.name] = v;\r\n        r[v.name].usedBy = sCharSkillLink[v.name];\r\n        return r;\r\n    }, {});\r\n    const luaOutput = util_1.convertObjectToLua(_.map(skillMap), \"Skills\");\r\n    const sync = _.map(skillMap, v => {\r\n        return { title: v.name, text: \"{{#invoke:Skill|renderSkill}}\" };\r\n    });\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"Skill.sync.json\", util_1.formatJSON(sync));\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"SkillData.lua\", luaOutput);\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"SkillFlat.json\", util_1.formatJSON(skills));\r\n};\r\n// sync\r\nconst convertCharSkill = async () => {\r\n    const sync = vCharList.map(v => {\r\n        return { title: v.name + \"/技能天赋\", text: \"{{#invoke:Character|renderSkillGroup}}\" };\r\n    });\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"CharSkill.sync.json\", util_1.formatJSON(sync));\r\n};\r\nconst convertCharWord = async () => {\r\n    const charword = charword_1.translateCharword();\r\n    const tab = util_1.json2Tab(_.map(charword));\r\n    const sync = vCharList.map(v => {\r\n        return { title: v.name + \"/语音互动\", text: \"{{#invoke:Charword|charword}}<noinclude>[[分类:语音]]</noinclude>\" };\r\n    });\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"CharWord.sync.json\", util_1.formatJSON(sync));\r\n    await fs.writeFile(var_1.TARGET_PREFIX + \"CharWord.tab.json\", JSON.stringify(tab));\r\n};\r\nconst convertSkillIcon = async () => {\r\n    const skillNames = _.map(data_1.skill_table, skill_1.translateSkillIcon);\r\n    await fs.ensureDir(var_1.TARGET_PREFIX + \"skills\");\r\n    for (let i = 0; i < skillNames.length; i++) {\r\n        const [id, name] = skillNames[i];\r\n        if (id && name) {\r\n            try {\r\n                await fs.copy(var_1.TMP_PREFIX + \"DB/Sprite/skill_icon_\" + id + \".png\", var_1.TARGET_PREFIX + \"skills/\" + name + \".png\");\r\n            }\r\n            catch (e) {\r\n                console.log(chalk_1.default.red(`[ERROR]`), `icon not found: ${id} ${name}`);\r\n            }\r\n        }\r\n    }\r\n};\r\n// 语音转换\r\nconst convertCVAudio = async () => {\r\n    await fs.ensureDir(var_1.TARGET_PREFIX + \"cv\");\r\n    const files = _.map(data_1.charword_table, cw => {\r\n        // const char = character_table[cw.charId];\r\n        const id = cw.charId.split(\"_\")[2];\r\n        // if (id != \"nightm\") return null;\r\n        return [\r\n            var_1.TMP_PREFIX + \"DB/AudioClip/assets/torappu/dynamicassets/audio/sound_beta_2/voice/\" + cw.voiceAsset.toLowerCase() + \".wav\",\r\n            var_1.TARGET_PREFIX + \"cv/\" + `${id}_${cw.voiceId}.ogg`,\r\n        ];\r\n    }).filter(Boolean);\r\n    // let bats = [];\r\n    await new Promise(resolve => {\r\n        async_1.default.forEachLimit(files, 8, async ([src, dst]) => {\r\n            const cmd = `ffmpeg -i \"${src}\" -c libvorbis -n -v quiet -ab 128k \"${dst}\"`;\r\n            if (await fs.pathExists(dst))\r\n                return;\r\n            // console.log(chalk.blue(\"processing\"), cmd);\r\n            // bats.push(cmd);\r\n            try {\r\n                const rst = await child_process_promise_1.exec(cmd);\r\n                if (rst.stderr) {\r\n                    console.log(chalk_1.default.red(\"[error]\"), rst.stderr);\r\n                    throw rst.stderr;\r\n                }\r\n                else {\r\n                    console.log(chalk_1.default.blue(\"processed\"), cmd);\r\n                }\r\n            }\r\n            catch (e) {\r\n                if (e.stderr)\r\n                    console.log(chalk_1.default.red(\"[error]\"), e.stderr);\r\n            }\r\n            return;\r\n        }, err => {\r\n            resolve();\r\n        });\r\n    });\r\n    // await fs.writeFile(TARGET_PREFIX + \"cmds.sh\", bats.join(\"\\n\"));\r\n};\r\nexports.default = async (cmd = \"\") => {\r\n    fs.ensureDir(var_1.TARGET_PREFIX);\r\n    await data_1.loadData();\r\n    if (!cmd || cmd === \"all\") {\r\n        console.log(\"[build] STEP1: convertCharacter Start\");\r\n        await convertCharacter();\r\n        console.log(\"[build] STEP2: convertItem Start\");\r\n        await convertItem();\r\n        console.log(\"[build] STEP3: convertStage Start\");\r\n        await convertStage();\r\n        console.log(\"[build] STEP4: convertEnemy Start\");\r\n        await convertEnemy();\r\n        console.log(\"[build] STEP5: convertCharHandbook Start\");\r\n        await convertCharHandbook();\r\n        console.log(\"[build] STEP6: convertSkill Start\");\r\n        await convertSkill();\r\n        console.log(\"[build] STEP7.5: convertCharSkill Start\");\r\n        await convertCharSkill();\r\n        console.log(\"[build] STEP7.6: convertCharWord Start\");\r\n        await convertCharWord();\r\n    }\r\n    if (cmd === \"char\" || cmd === \"all\") {\r\n        console.log(\"[build] STEP1.5: convertCharImage Start\");\r\n        await convertCharImage();\r\n    }\r\n    if (cmd === \"item\" || cmd === \"all\") {\r\n        console.log(\"[build] STEP2.5: convertItemImages Start\");\r\n        await item_img_1.convertItemImages();\r\n    }\r\n    if (cmd === \"map\" || cmd === \"all\") {\r\n        console.log(\"[build] STEP3.5: convertStage(image) Start\");\r\n        await convertStage(cmd);\r\n    }\r\n    if (cmd === \"skill\" || cmd === \"all\") {\r\n        console.log(\"[build] STEP6.5: convertSkillIcon Start\");\r\n        await convertSkillIcon();\r\n    }\r\n    if (cmd === \"cv\" || cmd === \"all\") {\r\n        console.log(\"[build] STEP7.7: convertCVAudio Start\");\r\n        await convertCVAudio();\r\n    }\r\n    console.log(\"[build] All Finished\");\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _ = require(\"lodash\");\r\nconst char_i_1 = require(\"../data/char.i\");\r\nconst data_1 = require(\"../data\");\r\nconst util_1 = require(\"../util\");\r\nconst chalk_1 = require(\"chalk\");\r\nconst uniqArray = (arr) => {\r\n    const tmp = _.uniq(arr);\r\n    if (tmp.length === 1)\r\n        return tmp;\r\n    return arr;\r\n};\r\nlet collectedPic = new Set();\r\nexports.toSkinFile = (head) => {\r\n    const charName = head.match(/(char|token|trap)_(\\d+)_([A-Za-z0-9]+)/);\r\n    if (charName) {\r\n        const skinTail = head.replace(`${charName[0]}_`, \"\").replace(\"#\", \"-\");\r\n        const skinHead = skinTail.split(\"-\")[0];\r\n        const skinHash = skinTail.split(\"-\")[1];\r\n        const skinid = skinTail.length === head.length ? head : charName[0] + (skinHash ? \"@\" + skinHead + \"#\" + skinHash : \"#\" + skinTail);\r\n        const skin = data_1.skin_table.charSkins[skinid];\r\n        if (skin) {\r\n            const skinSeq = skinTail;\r\n            const idMap = {\r\n                \"1+\": 2,\r\n                \"2\": 3,\r\n            };\r\n            const fileName = charName[3] + \"-\" + (idMap[skinSeq] || skinSeq);\r\n            return util_1.firstCase(fileName);\r\n        }\r\n    }\r\n    return;\r\n};\r\n// 转换数据到需要的形式\r\nexports.translateCharacter = (char, handbook) => {\r\n    let dst = {};\r\n    // base\r\n    dst.id = char.id;\r\n    dst.name = char.name;\r\n    dst.rarity = char.rarity;\r\n    if (char.description)\r\n        dst.description = char.description.replace(/\\\\n/g, \"\\n\");\r\n    if (!char.canUseGeneralPotentialItem)\r\n        dst.canUseGeneralPotentialItem = char.canUseGeneralPotentialItem;\r\n    if (char.potentialItemId)\r\n        dst.potentialItemId = char.potentialItemId;\r\n    dst.displayNumber = char.displayNumber;\r\n    dst.appellation = char.appellation;\r\n    dst.position = char.position;\r\n    dst.tagList = char.tagList;\r\n    dst.displayLogo = char.displayLogo;\r\n    dst.itemUsage = char.itemUsage;\r\n    dst.itemDesc = char.itemDesc;\r\n    dst.itemObtainApproach = char.itemObtainApproach;\r\n    dst.maxPotentialLevel = char.maxPotentialLevel;\r\n    dst.tokenKey = char.tokenKey;\r\n    if (char.team > -1) {\r\n        dst.team = {\r\n            key: data_1.handbook_team_table[char.team + \"\"].teamKey,\r\n            name: data_1.handbook_team_table[char.team + \"\"].teamName,\r\n            color: data_1.handbook_team_table[char.team + \"\"].color,\r\n        };\r\n    }\r\n    // 职业\r\n    dst.profession = char_i_1.Profession[char.profession]; // 转换成中文\r\n    // 潜能\r\n    if (char.potentialRanks)\r\n        dst.potentialRanks = char.potentialRanks.map(v => v.description);\r\n    // 归并数据\r\n    if (char.phases && char.phases[0] && char.phases[0].maxLevel) {\r\n        dst.maxLevel = [];\r\n        dst.rangeId = [];\r\n        dst.evolveCost = [];\r\n        const prop4list = [\"maxHp\", \"atk\", \"def\"];\r\n        const prop3list = [\r\n            \"magicResistance\",\r\n            \"cost\",\r\n            \"blockCnt\",\r\n            \"attackSpeed\",\r\n            \"baseAttackTime\",\r\n            \"respawnTime\",\r\n            \"hpRecoveryPerSec\",\r\n            \"spRecoveryPerSec\",\r\n            \"tauntLevel\",\r\n            \"massLevel\",\r\n            \"baseForceLevel\",\r\n            \"stunImmune\",\r\n            \"silenceImmune\",\r\n        ];\r\n        char.phases.forEach((phase, index) => {\r\n            // 初始数据\r\n            if (index === 0) {\r\n                prop4list.forEach(prop => {\r\n                    dst[prop] = [phase.attributesKeyFrames[0].data[prop]];\r\n                });\r\n                prop3list.forEach(prop => {\r\n                    dst[prop] = [];\r\n                });\r\n            }\r\n            dst.maxLevel.push(phase.maxLevel);\r\n            dst.rangeId.push(phase.rangeId);\r\n            // 满级数据\r\n            prop4list.concat(prop3list).forEach(prop => {\r\n                dst[prop].push(phase.attributesKeyFrames[1].data[prop]);\r\n            });\r\n            if (phase.evolveCost) {\r\n                dst.evolveCost.push(phase.evolveCost.map(v => {\r\n                    const item = data_1.item_table.items[v.id];\r\n                    return { name: item.name, count: v.count };\r\n                }));\r\n            }\r\n        });\r\n        dst.rangeId = uniqArray(dst.rangeId);\r\n        // 将所有数值都一样的换成一个值\r\n        prop3list.concat(prop4list).forEach(prop => {\r\n            dst[prop] = uniqArray(dst[prop]);\r\n        });\r\n        if (util_1.isEmpty(dst.evolveCost))\r\n            delete dst.evolveCost;\r\n    }\r\n    // 删除默认值\r\n    {\r\n        const checkDefault = (obj, key, def) => {\r\n            const arr = obj[key];\r\n            if (arr.length === 1 && arr[0] === def)\r\n                delete obj[key];\r\n        };\r\n        checkDefault(dst, \"hpRecoveryPerSec\", 0);\r\n        checkDefault(dst, \"spRecoveryPerSec\", 1);\r\n        checkDefault(dst, \"tauntLevel\", 0);\r\n        checkDefault(dst, \"massLevel\", 0);\r\n        checkDefault(dst, \"baseForceLevel\", 0);\r\n        checkDefault(dst, \"stunImmune\", false);\r\n        checkDefault(dst, \"silenceImmune\", false);\r\n    }\r\n    // 技能\r\n    if (char.skills) {\r\n        dst.skills = [];\r\n        char.skills.forEach(v => {\r\n            if (!v.skillId)\r\n                return;\r\n            const skill = data_1.skill_table[v.skillId];\r\n            if (skill) {\r\n                const s = {\r\n                    // id: skill.skillId,\r\n                    name: skill.levels[0].name,\r\n                    phase: v.unlockCond.phase,\r\n                };\r\n                if (v.unlockCond.level != 1)\r\n                    s.level = v.unlockCond.level;\r\n                // 专精材料\r\n                const cost = v.levelUpCostCond.map(v => {\r\n                    // if (!v.levelUpCost) console.log(char.name);\r\n                    return (v.levelUpCost &&\r\n                        v.levelUpCost.map(v => {\r\n                            const item = data_1.item_table.items[v.id];\r\n                            return { name: item.name, count: v.count };\r\n                        }));\r\n                });\r\n                if (cost.length && cost[0] != null)\r\n                    s.masterCost = cost;\r\n                dst.skills.push(s);\r\n            }\r\n            else {\r\n                console.log(chalk_1.default.red(\"[error]\"), v.skillId, \"skill not found\");\r\n            }\r\n        });\r\n        if (!dst.skills.length)\r\n            delete dst.skills;\r\n    }\r\n    // 技能升级\r\n    if (char.allSkillLvlup && char.allSkillLvlup.length) {\r\n        dst.skillCost = char.allSkillLvlup.map(rankup => {\r\n            if (!rankup.lvlUpCost) {\r\n                return [];\r\n            }\r\n            return rankup.lvlUpCost.map(cost => {\r\n                const item = data_1.item_table.items[cost.id];\r\n                return {\r\n                    name: item.name,\r\n                    count: cost.count,\r\n                };\r\n            });\r\n        });\r\n    }\r\n    // 天赋\r\n    if (char.talents) {\r\n        dst.talents = [];\r\n        char.talents.forEach(talent => {\r\n            if (!talent.candidates)\r\n                return;\r\n            const s = {\r\n                // id: skill.skillId,\r\n                name: talent.candidates[0].name,\r\n                phase: talent.candidates[0].unlockCondition.phase,\r\n                level: talent.candidates[0].unlockCondition.level,\r\n                desc: talent.candidates[0].description,\r\n                upgrades: talent.candidates.slice(1).map(v => {\r\n                    const rst = {};\r\n                    if (talent.candidates[0].name != v.name)\r\n                        rst.name = v.name;\r\n                    rst.phase = v.unlockCondition.phase;\r\n                    if (!v.unlockCondition.level && v.unlockCondition.level != 1)\r\n                        rst.level = v.unlockCondition.level;\r\n                    if (v.requiredPotentialRank)\r\n                        rst.potential = v.requiredPotentialRank;\r\n                    rst.desc = v.description;\r\n                    return rst;\r\n                }),\r\n            };\r\n            if (talent.candidates[0].unlockCondition.level != 1)\r\n                s.level = talent.candidates[0].unlockCondition.level;\r\n            dst.talents.push(s);\r\n        });\r\n    }\r\n    // handbook补充数据\r\n    if (handbook) {\r\n        dst.cv = handbook.infoName;\r\n        dst.art = handbook.drawName;\r\n    }\r\n    // skin补充数据\r\n    const skins = _.filter(data_1.skin_table.charSkins, v => v.charId === char.id);\r\n    if (skins && skins.length > 0) {\r\n        dst.skins = skins.map(v => {\r\n            const skin = {\r\n                // id: v.portraitId,\r\n                name: v.displaySkin.skinGroupName,\r\n                // desc: v.displaySkin.content,\r\n                file: exports.toSkinFile(v.portraitId) + \".png\",\r\n            };\r\n            collectedPic.add(v.portraitId);\r\n            if (v.displaySkin.drawerName && v.displaySkin.drawerName.toLowerCase() !== dst.art.toLowerCase())\r\n                skin.drawer = v.displaySkin.drawerName;\r\n            return skin;\r\n        });\r\n    }\r\n    // charwork 补充数据\r\n    if (data_1.charword_table[char.id + \"_CN_011\"])\r\n        dst.appearance = data_1.charword_table[char.id + \"_CN_011\"].voiceText;\r\n    // extra补充数据 (基建)\r\n    const extra = data_1.char_extra_table[dst.name];\r\n    if (extra) {\r\n        Object.assign(dst, extra);\r\n    }\r\n    return dst;\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Profession;\r\n(function (Profession) {\r\n    Profession[\"PIONEER\"] = \"\\u5148\\u950B\";\r\n    Profession[\"WARRIOR\"] = \"\\u8FD1\\u536B\";\r\n    Profession[\"TANK\"] = \"\\u91CD\\u88C5\";\r\n    Profession[\"SPECIAL\"] = \"\\u7279\\u79CD\";\r\n    Profession[\"SNIPER\"] = \"\\u72D9\\u51FB\";\r\n    Profession[\"CASTER\"] = \"\\u672F\\u5E08\";\r\n    Profession[\"MEDIC\"] = \"\\u533B\\u7597\";\r\n    Profession[\"SUPPORT\"] = \"\\u8F85\\u52A9\";\r\n    Profession[\"TOKEN\"] = \"\\u53EC\\u5524\";\r\n    Profession[\"TRAP\"] = \"\\u9677\\u9631\";\r\n})(Profession = exports.Profession || (exports.Profession = {}));\r\n","module.exports = require(\"prettier\");","module.exports = require(\"util\");","module.exports = require(\"image-size\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst data_1 = require(\"../data\");\r\nconst util_1 = require(\"../util\");\r\nexports.translateItem = (item) => {\r\n    return util_1.purge({\r\n        name: item.name,\r\n        rarity: item.rarity,\r\n        iconid: item.iconId,\r\n        description: item.description.replace(/\\\\n/g, \"\\n\"),\r\n        stackiconid: item.stackIconId,\r\n        usage: item.usage,\r\n        obtainapproach: item.obtainApproach,\r\n        itemtype: item.itemType,\r\n        dropBy: item.stageDropList\r\n            .map(v => {\r\n            const stage_name = data_1.stage_table.stages[v.stageId].code === \"剿灭作战\" ? `${data_1.stage_table.stages[v.stageId].name}（剿灭作战）` : data_1.stage_table.stages[v.stageId].code;\r\n            const key = `[[${stage_name}]]`;\r\n            let DropRateTable;\r\n            (function (DropRateTable) {\r\n                DropRateTable[\"SOMETIMES\"] = \"\\u7F55\\u89C1\";\r\n                DropRateTable[\"OFTEN\"] = \"\\u5C0F\\u6982\\u7387\";\r\n                DropRateTable[\"USUAL\"] = \"\\u6982\\u7387\\u6389\\u843D\";\r\n                DropRateTable[\"ALMOST\"] = \"\\u5927\\u6982\\u7387\";\r\n                DropRateTable[\"ALWAYS\"] = \"\\u56FA\\u5B9A\\u6389\\u843D\";\r\n            })(DropRateTable || (DropRateTable = {}));\r\n            const rate = DropRateTable[v.occPer];\r\n            return (rate ? key + \",\" + rate : key) + \",\";\r\n        })\r\n            .join(\";\"),\r\n        craftBy: item.buildingProductList\r\n            .map(v => {\r\n            let RoomType;\r\n            (function (RoomType) {\r\n                RoomType[\"MANUFACTURE\"] = \"\\u5236\\u9020\\u7AD9\";\r\n                RoomType[\"WORKSHOP\"] = \"\\u52A0\\u5DE5\\u7AD9\";\r\n            })(RoomType || (RoomType = {}));\r\n            return RoomType[v.roomType];\r\n        })\r\n            .join(\",\"),\r\n    });\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _ = require(\"lodash\");\r\nconst data_1 = require(\"../data\");\r\nconst common_util_1 = require(\"../common.util\");\r\nconst var_1 = require(\"../var\");\r\nconst fs_extra_1 = require(\"fs-extra\");\r\nconst translateDrop = (drop) => {\r\n    const item = data_1.item_table.items[drop.id];\r\n    if (!item) {\r\n        return; //drop.id;\r\n    }\r\n    return item.name;\r\n};\r\nconst translateCharDrop = (drop) => {\r\n    const char = data_1.character_table[drop.id];\r\n    if (char)\r\n        return char.name;\r\n    return drop.id;\r\n};\r\nconst translateStageEnemy = (levelId, id) => {\r\n    const file = var_1.TMP_PREFIX + `ArknightsGameData/levels/${levelId.toLowerCase()}.json`;\r\n    if (fs_extra_1.pathExistsSync(file)) {\r\n        const level = JSON.parse(fs_extra_1.readFileSync(file, \"utf-8\"));\r\n        return level.enemyDbRefs\r\n            .map(v => v.id)\r\n            .map(id => {\r\n            const enemy = data_1.enemy_handbook_table[id];\r\n            if (enemy) {\r\n                return enemy.name;\r\n            }\r\n        })\r\n            .filter(Boolean);\r\n    }\r\n    return [];\r\n};\r\nexports.translateStagePreview = (stage) => {\r\n    const raw = _.find(data_1.stage_table.stages, v => v.code === stage.name);\r\n    if (raw) {\r\n        const src = var_1.TMP_PREFIX + `DB/Texture2D/assets/torappu/dynamicassets/arts/ui/stage/mappreviews/${raw.stageId}.png`;\r\n        const dist = var_1.TARGET_PREFIX + `maps/${stage.preview}.png`;\r\n        return [src, dist];\r\n    }\r\n    // 512*288\r\n};\r\n// 关卡数据\r\nexports.translateStage = () => {\r\n    return _.filter(data_1.stage_table.stages, v => !v.stageId.includes(\"#f#\") && !!v.name).map(main => {\r\n        let dst = {};\r\n        // 突袭\r\n        const hard = main.hardStagedId ? data_1.stage_table.stages[main.hardStagedId] : null;\r\n        if (main.code === \"剿灭作战\") {\r\n            dst.name = main.code = `${main.name}（剿灭作战）`;\r\n            dst.preview = main.stageId;\r\n        }\r\n        else if (main.code) {\r\n            dst.name = main.code.trim();\r\n            dst.preview = \"MAP-\" + dst.name;\r\n        }\r\n        if (main.name)\r\n            dst.alterName = main.name.trim();\r\n        if (main.description)\r\n            dst.description = main.description.replace(/\\\\n/g, \"\\n\");\r\n        if (hard && hard.description)\r\n            dst.hardDesc = hard.description.replace(\"<@lv.fs>附加条件：</>\\\\n\", \"\").replace(/\\\\n/g, \"\\n\");\r\n        if (main.dangerLevel && main.dangerLevel !== \"-\")\r\n            dst.dangerLevel = main.dangerLevel;\r\n        if (!main.canPractice)\r\n            dst.canPractice = main.canPractice;\r\n        if (!main.canBattleReplay)\r\n            dst.canBattleReplay = main.canBattleReplay;\r\n        if (main.apCost)\r\n            dst.apCost = main.apCost;\r\n        if (main.apFailReturn)\r\n            dst.apFailReturn = main.apFailReturn;\r\n        if (main.practiceTicketCost && main.practiceTicketCost !== 1 && main.practiceTicketCost !== -1)\r\n            dst.practiceTicketCost = main.practiceTicketCost;\r\n        if (main.expGain && main.expGain !== main.apCost * 10)\r\n            dst.expGain = main.expGain;\r\n        if (main.goldGain && main.goldGain !== main.apCost * 10)\r\n            dst.goldGain = main.goldGain;\r\n        // if (main.passFavor) dst.passFavor = main.passFavor;\r\n        if (main.hilightMark)\r\n            dst.hilightMark = main.hilightMark;\r\n        if (main.bossMark)\r\n            dst.bossMark = main.bossMark;\r\n        if (main.isPredefined)\r\n            dst.isPredefined = main.isPredefined;\r\n        if (main.stageDropInfo && main.stageDropInfo.displayDetailRewards) {\r\n            const drop = main.stageDropInfo.displayDetailRewards;\r\n            const hardGrop = hard && hard.stageDropInfo && hard.stageDropInfo.displayDetailRewards;\r\n            const processDrop = (v) => v && v.map(translateDrop).filter(Boolean);\r\n            const firstDrop = processDrop(drop.filter(v => v.dropType === 1 && v.type !== \"CHAR\"));\r\n            const firstCharDrop = drop\r\n                .filter(v => v.dropType === 1 && v.type === \"CHAR\")\r\n                .map(translateCharDrop)\r\n                .filter(Boolean);\r\n            const firstHardDrop = processDrop(hardGrop && hardGrop.filter(v => v.dropType === 1));\r\n            const commonDrop = processDrop(drop.filter(v => v.dropType === 2));\r\n            const specialDrop = processDrop(drop.filter(v => v.dropType === 3));\r\n            const extraDrop = processDrop(drop.filter(v => v.dropType === 4));\r\n            // const luckyDrop = drop.filter(v => v.dropType === 7);\r\n            if (firstDrop && firstDrop.length)\r\n                dst.firstDrop = firstDrop;\r\n            if (firstCharDrop && firstCharDrop.length)\r\n                dst.firstCharDrop = firstCharDrop;\r\n            if (firstHardDrop && firstHardDrop.length)\r\n                dst.firstHardDrop = firstHardDrop;\r\n            if (commonDrop && commonDrop.length)\r\n                dst.commonDrop = commonDrop;\r\n            if (specialDrop && specialDrop.length)\r\n                dst.specialDrop = specialDrop;\r\n            if (extraDrop && extraDrop.length)\r\n                dst.extraDrop = extraDrop;\r\n            const enemies = translateStageEnemy(main.levelId, main.stageId);\r\n            if (enemies && enemies.length)\r\n                dst.enemies = enemies;\r\n        }\r\n        return common_util_1.purge(dst);\r\n    });\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.purge = (a) => {\r\n    Object.keys(a).forEach(v => a[v] !== 0 && !a[v] && delete a[v]);\r\n    return a;\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst data_1 = require(\"../data\");\r\nexports.translateEnemy = (enemyHandbook) => {\r\n    const enemy = data_1.enemy_table[enemyHandbook.enemyId];\r\n    const dst = {};\r\n    dst.id = enemyHandbook.enemyId;\r\n    dst.name = enemyHandbook.name;\r\n    dst.index = enemyHandbook.enemyIndex;\r\n    dst.level = enemyHandbook.enemyLevel;\r\n    dst.description = enemyHandbook.description;\r\n    if (enemyHandbook.enemyRace)\r\n        dst.enemyRace = enemyHandbook.enemyRace;\r\n    dst.attackType = enemyHandbook.attackType;\r\n    if (enemyHandbook.ability)\r\n        dst.ability = enemyHandbook.ability;\r\n    dst.handbook = [enemyHandbook.endure, enemyHandbook.attack, enemyHandbook.defence, enemyHandbook.resistance];\r\n    if (enemy) {\r\n        if (enemy.length < 1) {\r\n            console.log(enemy);\r\n            return;\r\n        }\r\n        const [level0, level1] = enemy;\r\n        const attributes = [\"maxHp\", \"atk\", \"def\", \"magicResistance\", \"moveSpeed\", \"baseAttackTime\", \"massLevel\", \"stunImmune\", \"silenceImmune\"];\r\n        attributes.forEach(v => {\r\n            if (level0.enemyData.attributes[v].m_value)\r\n                dst[v + \"0\"] = level0.enemyData.attributes[v].m_value;\r\n        });\r\n        if (level0.enemyData.rangeRadius.m_value)\r\n            dst.rangeRadius0 = level0.enemyData.rangeRadius.m_value;\r\n        if (level1) {\r\n            attributes.forEach(v => {\r\n                if (level1.enemyData.attributes[v].m_value)\r\n                    dst[v + \"1\"] = level1.enemyData.attributes[v].m_value;\r\n            });\r\n            if (level1.enemyData.rangeRadius.m_value)\r\n                dst.rangeRadius1 = level1.enemyData.rangeRadius.m_value;\r\n        }\r\n    }\r\n    return dst;\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.translateSkillIcon = (skill) => {\r\n    return [skill.iconId || skill.skillId, skill.levels[0].name];\r\n};\r\nexports.translateSkill = (skill) => {\r\n    const dst = {};\r\n    const base = skill.levels[0];\r\n    dst.name = base.name;\r\n    dst.skillType = base.skillType;\r\n    dst.spType = base.spData.spType;\r\n    if (base.rangeId)\r\n        dst.rangeId = base.rangeId;\r\n    dst.levels = skill.levels.map(lv => {\r\n        const level = {};\r\n        if (lv.duration && lv.duration > 0)\r\n            level.duration = lv.duration;\r\n        if (lv.rangeId !== base.rangeId)\r\n            level.rangeId = lv.rangeId;\r\n        if (lv.spData.spCost)\r\n            level.spCost = lv.spData.spCost;\r\n        if (lv.spData.initSp)\r\n            level.initSp = lv.spData.initSp;\r\n        if (lv.spData.increment != 0 && lv.spData.increment != 1)\r\n            level.increment = lv.spData.increment;\r\n        // if (lv.spData.maxChargeTime != 1 && lv.spData.maxChargeTime != 0) level.maxChargeTime = lv.spData.maxChargeTime;\r\n        const props = lv.blackboard.reduce((r, v) => ((r[v.key] = v.value), r), {});\r\n        level.description = lv.description\r\n            .replace(/\\{-?(.+?)(:.+?)?\\}/g, (m, key, format) => {\r\n            key = key.toLowerCase();\r\n            const val = (m.startsWith(\"{-\") ? -1 : 1) * props[key];\r\n            if (format == \":0%\") {\r\n                return (val * 100).toFixed() + \"%\";\r\n            }\r\n            if (format == \":0.0%\") {\r\n                return (val * 100).toFixed(1) + \"%\";\r\n            }\r\n            return String(val);\r\n        })\r\n            .replace(/攻击间隔(?:<@ba\\.vdown>增大<\\/>|<@ba\\.vup>.*?缩短<\\/>)/g, m => {\r\n            const val = props[\"base_attack_time\"];\r\n            return m + `(${val >= 0 ? \"+\" : \"\"}${val})`;\r\n        })\r\n            .replace(/攻击前摇/g, m => {\r\n            const val = props[\"attack@stun\"];\r\n            return m + `(${val >= 0 ? \"+\" : \"\"}${val})`;\r\n        });\r\n        return level;\r\n    });\r\n    return dst;\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _ = require(\"lodash\");\r\nconst data_1 = require(\"../data\");\r\nexports.translateCharword = () => {\r\n    const initr = \"cn_001/cn_002/cn_003/cn_004/cn_005/cn_006/cn_007/cn_008/cn_009/cn_010/cn_011/cn_012/cn_013/cn_014/cn_017/cn_018/cn_019/cn_020/cn_021/cn_022/cn_023/cn_024/cn_025/cn_026/cn_027/cn_028/cn_029/cn_030/cn_031/cn_032/cn_033/cn_034/cn_036/cn_037/cn_042\".split(\"/\");\r\n    const charword = _.reduce(data_1.charword_table, (r, v) => {\r\n        const char = data_1.character_table[v.charId];\r\n        if (!r[char.name]) {\r\n            r[char.name] = { id: v.charId.split(\"_\")[2], name: char.name };\r\n            initr.forEach(v => (r[char.name][v] = \"无\"));\r\n        }\r\n        r[char.name][v.voiceId.toLowerCase()] = v.voiceText.replace(/\\n/g, \"<br>\");\r\n        return r;\r\n    }, {});\r\n    return charword;\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fs = require(\"fs-extra\");\r\nconst child_process_promise_1 = require(\"child-process-promise\");\r\nconst var_1 = require(\"../var\");\r\nconst yaml = require(\"yaml\");\r\nconst util_1 = require(\"../util\");\r\nexports.convertItemImages = async () => {\r\n    // 通道合并\r\n    const basedir = var_1.TMP_PREFIX + \"item_icons_hub.ab/Assets/Texture2D/\";\r\n    const files = await fs.readdir(basedir);\r\n    const outs = [];\r\n    for (const file of files.filter(v => v.endsWith(\".png\") && !v.includes(\"_alpha\") && !v.includes(\"_out\"))) {\r\n        const origin = file, alpha = /_(\\d+)\\.png/.test(file) ? file.replace(/_(\\d+)\\.png/, \"_alpha_$1.png\") : file.replace(\".png\", \"_alpha.png\"), out = file.replace(\".png\", \"_out.png\");\r\n        outs.push([out, file + \".meta\"]);\r\n        await child_process_promise_1.exec(`magick convert \"${basedir + origin}\" \"${basedir + alpha}\" -alpha off -compose copyopacity -composite ${basedir}${out}`);\r\n    }\r\n    await fs.ensureDir(`${var_1.TARGET_PREFIX}items`);\r\n    // 图片分割\r\n    for (const [img, meta] of outs) {\r\n        const data = yaml.parse(await fs.readFile(basedir + meta, \"utf-8\"));\r\n        for (const sprite of data.TextureImporter.spriteSheet.sprites) {\r\n            const res = (await util_1.imgSizeOf(basedir + img)).width;\r\n            const size = `${Math.round(sprite.rect.width)}x${Math.round(sprite.rect.height)}+${Math.round(sprite.rect.x)}+${Math.round(res - sprite.rect.y - sprite.rect.height)}`;\r\n            console.log(size);\r\n            await child_process_promise_1.exec(`magick convert \"${basedir + img}\" -crop ${size} ${var_1.TARGET_PREFIX}items/${sprite.name}.png`);\r\n        }\r\n    }\r\n};\r\n","module.exports = require(\"yaml\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fs = require(\"fs-extra\");\r\nconst var_1 = require(\"./var\");\r\nexports.default = async () => {\r\n    await fs.remove(var_1.TARGET_PREFIX);\r\n    console.log(\"[clean] All Finished\");\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst bot_1 = require(\"./wiki/bot\");\r\nconst fs = require(\"fs-extra\");\r\nconst var_1 = require(\"./var\");\r\nconst chalk_1 = require(\"chalk\");\r\nconst path = require(\"path\");\r\nconst util_1 = require(\"./util\");\r\nrequire(\"dotenv\").config();\r\nconst uploadImage = async (dir, bot, force = false, skip = \"\") => {\r\n    const files = await fs.readdir(var_1.TARGET_PREFIX + dir + \"/\");\r\n    const TH = 3;\r\n    let skipv = skip, skipedFiles = 0;\r\n    if (force)\r\n        console.log(chalk_1.default.red(`force mode enabled`));\r\n    if (skipv)\r\n        console.log(chalk_1.default.green(`start skip to ${skip}`));\r\n    for (let i = 0; i < files.length; i += TH) {\r\n        const job = async (file) => {\r\n            const name = path.basename(file);\r\n            if (skipv) {\r\n                ++skipedFiles;\r\n                if (skipv === name) {\r\n                    console.log(chalk_1.default.green(`skipped ${skipedFiles}/${files.length} files`));\r\n                    skipv = \"\";\r\n                }\r\n                return;\r\n            }\r\n            let done = false;\r\n            do {\r\n                try {\r\n                    if (force || !(await bot.getImageInfo(name))) {\r\n                        const rst = await bot.uploadFile(file);\r\n                        console.log(\"[sync]\", name, rst.upload ? chalk_1.default.green(\"uploaded\") + \" \" + rst.upload.result : chalk_1.default.red(\"error\"));\r\n                    }\r\n                    done = true;\r\n                }\r\n                catch (e) {\r\n                    console.log(chalk_1.default.red(\"[sync] upload failed => [auto retry]\"), name);\r\n                }\r\n            } while (!done);\r\n        };\r\n        const jobfiles = files.slice(i, i + TH).map(v => var_1.TARGET_PREFIX + dir + \"/\" + v);\r\n        await Promise.all(jobfiles.map(job));\r\n    }\r\n};\r\nconst syncPage = async (bot, title, text) => {\r\n    if ((await bot.raw(title)) !== text) {\r\n        console.log(\"[sync]\", chalk_1.default.greenBright(\"diff detected:\"), title);\r\n        const rst = await bot.edit({ title, text });\r\n        if (rst.error) {\r\n            console.log(chalk_1.default.red(\"[syncPage]\"), rst);\r\n        }\r\n    }\r\n};\r\nconst syncPageFromFile = async (bot, rawTitle, localFile, base = var_1.TARGET_PREFIX) => {\r\n    const file = base + localFile;\r\n    const localRaw = await fs.readFile(file, \"utf-8\");\r\n    return await syncPage(bot, rawTitle, localRaw);\r\n};\r\nconst downloadPage = async (bot, rawTitle, localFile) => {\r\n    const text = await bot.raw(rawTitle);\r\n    if (text)\r\n        await fs.writeFile(localFile, text);\r\n};\r\nconst modulesList = \"Enemy/Skill/Stage/Character/Item/Util/Charword\".split(\"/\");\r\nconst pullModules = async (bot) => {\r\n    const pull = (module) => {\r\n        return downloadPage(bot, `Module:${module}`, `src/module/${module}.lua`);\r\n    };\r\n    for (const mo of modulesList) {\r\n        console.log(\"pull\", mo);\r\n        await pull(mo);\r\n    }\r\n};\r\nconst pushModules = async (bot) => {\r\n    const push = (module) => {\r\n        return syncPageFromFile(bot, `Module:${module}`, `src/module/${module}.lua`, \"\");\r\n    };\r\n    for (const mo of modulesList) {\r\n        await push(mo);\r\n    }\r\n};\r\nconst uploadModuleData = async (bot) => {\r\n    await Promise.all([\r\n        syncPageFromFile(bot, \"Module:Character/data\", \"CharacterData.lua\"),\r\n        syncPageFromFile(bot, \"Module:Item/data\", \"ItemData.lua\"),\r\n        syncPageFromFile(bot, \"Module:Stage/data\", \"StageData.lua\"),\r\n        syncPageFromFile(bot, \"Module:Enemy/data\", \"EnemyData.lua\"),\r\n        syncPageFromFile(bot, \"Module:Skill/data\", \"SkillData.lua\"),\r\n    ]);\r\n};\r\nconst purgeWithTemplate = async (bot, tplName) => {\r\n    const rst = await bot.purge({ generator: \"transcludedin\", titles: tplName, gtilimit: 500 });\r\n    console.log(util_1.formatJSON(rst));\r\n};\r\nconst syncMultiPages = async (bot, file, base = var_1.TARGET_PREFIX) => {\r\n    const pages = JSON.parse(await fs.readFile(base + file, \"utf-8\"));\r\n    for (let i = 0; i < pages.length; i++) {\r\n        const page = pages[i];\r\n        await syncPage(bot, page.title, page.text);\r\n    }\r\n};\r\nconst syncSinglePage = async (bot, title, file) => {\r\n    const text = await fs.readFile(var_1.TARGET_PREFIX + file, \"utf-8\");\r\n    await syncPage(bot, title, text);\r\n};\r\nexports.default = async (argv) => {\r\n    const bot = new bot_1.WikiBot(\"https://arknights.huijiwiki.com/\", process.env.user, process.env.session);\r\n    await bot.getToken();\r\n    const mode = argv.mode;\r\n    const force = argv.force;\r\n    // 模块管理\r\n    if (mode === \"pull\") {\r\n        console.log(\"[sync] pull modules start\");\r\n        await pullModules(bot);\r\n    }\r\n    if (mode === \"push\") {\r\n        console.log(\"[sync] push modules start\");\r\n        await pushModules(bot);\r\n    }\r\n    // 自动上传图片\r\n    if (mode === \"char\" || mode === \"all\") {\r\n        console.log(\"[sync] uploadImage(char) start\");\r\n        await uploadImage(\"char\", bot, force);\r\n    }\r\n    if (mode === \"itemimg\" || mode === \"all\") {\r\n        console.log(\"[sync] uploadImage(item) start\");\r\n        await uploadImage(\"items\", bot, force, argv.skip);\r\n    }\r\n    if (mode === \"map\" || mode === \"all\") {\r\n        console.log(\"[sync] uploadImage(map) start\");\r\n        await uploadImage(\"maps\", bot, force);\r\n    }\r\n    if (mode === \"cv\" || mode === \"all\") {\r\n        await uploadImage(\"cv\", bot, force);\r\n    }\r\n    if (mode === \"skillimg\" || mode === \"all\") {\r\n        console.log(\"[sync] uploadImage(skill) start\");\r\n        await uploadImage(\"skills\", bot, force);\r\n    }\r\n    // 同步模块数据\r\n    if (mode === \"module\" || mode === \"all\") {\r\n        // const raw = await bot.raw(\"Module:Character/data\");\r\n        console.log(\"[sync] uploadModuleData start\");\r\n        await uploadModuleData(bot);\r\n    }\r\n    // 同步\r\n    if (mode === \"book\" || mode === \"all\") {\r\n        console.log(\"[sync] sync char.*sync.json start\");\r\n        await syncMultiPages(bot, \"Char.sync.json\");\r\n        await syncMultiPages(bot, \"Skill.sync.json\");\r\n        await syncMultiPages(bot, \"CharSkill.sync.json\");\r\n        await syncMultiPages(bot, \"CharHandbook.sync.json\");\r\n        await syncMultiPages(bot, \"CharWord.sync.json\");\r\n    }\r\n    if (mode === \"enemy\" || mode === \"all\") {\r\n        console.log(\"[sync] sync enemy.*sync.json start\");\r\n        await syncMultiPages(bot, \"Enemy.sync.json\");\r\n    }\r\n    if (mode === \"stage\" || mode === \"all\") {\r\n        console.log(\"[sync] sync stage.*sync.json start\");\r\n        await syncMultiPages(bot, \"Stage.sync.json\");\r\n    }\r\n    if (mode === \"tab\" || mode === \"all\") {\r\n        await syncSinglePage(bot, \"Data:Charword.tab\", \"CharWord.tab.json\");\r\n    }\r\n    if (mode === \"purge\" || mode === \"all\") {\r\n        await purgeWithTemplate(bot, \"template:NavboxEnemy\");\r\n        await purgeWithTemplate(bot, \"template:NavboxChar\");\r\n        await purgeWithTemplate(bot, \"template:NavboxStage\");\r\n        await purgeWithTemplate(bot, \"template:技能条\");\r\n    }\r\n    console.log(\"[sync] All Finished\");\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst axios_1 = require(\"axios\");\r\nconst querystring = require(\"querystring\");\r\nconst FormData = require(\"form-data\");\r\nconst fs = require(\"fs-extra\");\r\nconst path = require(\"path\");\r\nclass WikiBot {\r\n    constructor(wiki, user, session) {\r\n        this.BASE = \"https://www.huijiwiki.com/\";\r\n        this.BASE = wiki;\r\n        this.user = user;\r\n        this.session = session;\r\n        this.client = axios_1.default.create({\r\n            headers: {\r\n                common: {\r\n                    Cookie: `huijiUserID=${user}; huiji_session=${session};`,\r\n                },\r\n                post: {\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                },\r\n            },\r\n        });\r\n    }\r\n    get API() {\r\n        return this.BASE + \"api.php\";\r\n    }\r\n    get RAW() {\r\n        return this.BASE + \"index.php?action=raw&title=\";\r\n    }\r\n    async apiPagination(url) {\r\n        let res = await this.client.get(url);\r\n        if (res) {\r\n            let pages = res.data.query.pages;\r\n            let keys = Object.keys(pages);\r\n            if (keys.length > 0 && keys[0] != \"-1\") {\r\n                let page = pages[keys[0]];\r\n                return page;\r\n            }\r\n            return;\r\n        }\r\n    }\r\n    /** 获取token */\r\n    async getToken() {\r\n        const rst = await this.client.get(this.API + `?action=query&meta=tokens&format=json`);\r\n        return (this.token = rst.data.query.tokens.csrftoken);\r\n    }\r\n    /** 执行ask */\r\n    async ask(ask, offset = 0, limit = 50) {\r\n        const url = this.API + `?action=ask&format=json&query=${encodeURI(ask + `|limit=${limit}|offset=${offset}`)}`;\r\n        const rst = await this.client.get(url);\r\n        console.log(\"[ASK]\", url);\r\n        const results = rst.data.query.results;\r\n        // 自动翻页\r\n        if (rst.data[\"query-continue-offset\"]) {\r\n            const nextPage = await this.ask(ask, rst.data[\"query-continue-offset\"], limit);\r\n            const allPage = { ...results, ...nextPage };\r\n            return allPage;\r\n        }\r\n        return results;\r\n    }\r\n    /** 编辑或创建页面 */\r\n    async edit(info) {\r\n        const formdata = querystring.stringify({ action: \"edit\", format: \"json\", token: this.token, ...info });\r\n        const rst = await this.client.post(this.API, formdata);\r\n        return rst.data.edit || rst.data;\r\n    }\r\n    /** 获取页面源码 */\r\n    async raw(title) {\r\n        try {\r\n            const rst = await this.client.get(this.RAW + encodeURI(title));\r\n            return rst.data;\r\n        }\r\n        catch (e) {\r\n            if (e.message !== \"Request failed with status code 404\")\r\n                console.log(e.message);\r\n            return \"\";\r\n        }\r\n    }\r\n    /** 删除页面 */\r\n    async delete(title, reason = \"\") {\r\n        const formdata = querystring.stringify({ action: \"delete\", format: \"json\", token: this.token, title, reason });\r\n        const rst = await this.client.post(this.API, formdata);\r\n        return rst.data.delete || rst.data;\r\n    }\r\n    /** 为指定标题刷新缓存 */\r\n    async purge(options) {\r\n        const formdata = querystring.stringify({ action: \"purge\", format: \"json\", ...options });\r\n        const rst = await this.client.post(this.API, formdata);\r\n        return rst.data.purge || rst.data;\r\n    }\r\n    /** 搬运文件 */\r\n    async transferFile(filename, fileurl) {\r\n        let url = this.API;\r\n        let res = await this.client.post(url, querystring.stringify({\r\n            format: \"json\",\r\n            action: \"upload\",\r\n            url: fileurl,\r\n            filename,\r\n            comment: `从${fileurl}搬运文件：${filename}。(via nodejs)`,\r\n            text: \"\",\r\n            token: this.token,\r\n        }), { timeout: 5e3 });\r\n        return res.data;\r\n    }\r\n    async uploadFile(filename, buffer) {\r\n        let url = this.API;\r\n        const file = buffer || fs.createReadStream(filename);\r\n        const name = path.basename(filename);\r\n        let form = new FormData();\r\n        form.append(\"format\", \"json\");\r\n        form.append(\"action\", \"upload\");\r\n        form.append(\"filename\", name);\r\n        form.append(\"ignorewarnings\", \"true\");\r\n        form.append(\"token\", this.token);\r\n        form.append(\"file\", file);\r\n        let res = await this.client.post(url, form, {\r\n            timeout: 10e3,\r\n            headers: form.getHeaders(),\r\n        });\r\n        return res.data;\r\n    }\r\n    // 获取图片的真实地址\r\n    async getImageInfo(filename) {\r\n        /** example:\r\n         * rst = {\r\n      batchcomplete: \"\",\r\n      query: {\r\n        normalized: [{ from: \"File:12fce-1.png\", to: \"\\u6587\\u4ef6:12fce-1.png\" }],\r\n        pages: {\r\n          \"1211\": {\r\n            pageid: 1211,\r\n            ns: 6,\r\n            title: \"\\u6587\\u4ef6:12fce-1.png\",\r\n            imagerepository: \"local\",\r\n            imageinfo: [\r\n              {\r\n                url: \"https://huiji-public.huijistatic.com/arknights/uploads/1/15/12fce-1.png\",\r\n                descriptionurl: \"https://arknights.huijiwiki.com/wiki/%E6%96%87%E4%BB%B6:12fce-1.png\",\r\n                descriptionshorturl: \"https://arknights.huijiwiki.com/index.php?curid=1211\",\r\n              },\r\n            ],\r\n          },\r\n        },\r\n      },\r\n    };\r\n         */\r\n        let api = `${this.API}?action=query&titles=File:${encodeURI(filename)}&prop=imageinfo&&iiprop=url&format=json`;\r\n        let rst = await this.apiPagination(api);\r\n        return rst && rst.imageinfo[0].url;\r\n    }\r\n}\r\nexports.WikiBot = WikiBot;\r\n","module.exports = require(\"axios\");","module.exports = require(\"querystring\");","module.exports = require(\"form-data\");","module.exports = require(\"dotenv\");","module.exports = require(\"yargs\");"],"sourceRoot":""}